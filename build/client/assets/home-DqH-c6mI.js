import{w as u}from"./with-props-BITBR5i4.js";import{a as e,o as s,L as m}from"./chunk-D4RADZKF-F8gbsHt2.js";import{C as p}from"./global-DqGd4opN.js";import{P as f}from"./post-tiVzxYm2.js";import"./ava-C2JHgPho.js";function P({}){return[{title:"blog"},{name:"description",content:"Welcome to React Router!"}]}const R=u(function(){const{curUser:n}=e.useContext(p),r=e.useRef(""),o=e.useRef(""),[a,c]=e.useState(null);e.useEffect(()=>{(async()=>{const t=await fetch("http://localhost:3000/api/v1/posts");o.current=await t.json(),c(o.current.filter(l=>n.following_ids.includes(l.user_id)))})()},[]);function i(){c(o.current.filter(t=>t.body.includes(r.current.value)))}return s.jsxs("section",{className:"section",children:[s.jsxs("div",{className:"row",children:[n.name&&s.jsx(m,{className:"btn",to:"/new",children:"Пост"}),s.jsx("input",{className:"input input_small",placeholder:"Поиск постов...",ref:r,onChange:i})]}),a?a.map(t=>s.jsx(f,{post:t},t.id)):s.jsx("p",{children:"Загрузка..."})]})});export{R as default,P as meta};
